{"version":3,"sources":["../../../src/ai/services/ai-config.service.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common';\r\nimport { ConfigService } from '@nestjs/config';\r\nimport Replicate from 'replicate';\r\nimport {\r\n  LanguageModel,\r\n  experimental_wrapLanguageModel as wrapLanguageModel,\r\n} from 'ai';\r\nimport { openai } from '@ai-sdk/openai';\r\nimport { customMiddleware } from '../custom-middleware';\r\n\r\n@Injectable()\r\nexport class AiConfigService {\r\n  private replicate: Replicate;\r\n  private openAIModel: LanguageModel;\r\n\r\n  constructor(private configService: ConfigService) {\r\n    this.replicate = new Replicate({\r\n      auth: this.configService.get('REPLICATE_API_TOKEN'),\r\n    });\r\n\r\n    this.openAIModel = wrapLanguageModel({\r\n      model: openai('gpt-3.5-turbo'),\r\n      middleware: customMiddleware,\r\n    });\r\n  }\r\n\r\n  getReplicate() {\r\n    return this.replicate;\r\n  }\r\n\r\n  getModel() {\r\n    return this.openAIModel;\r\n  }\r\n}\r\n"],"names":["AiConfigService","getReplicate","replicate","getModel","openAIModel","configService","Replicate","auth","get","wrapLanguageModel","model","openai","middleware","customMiddleware"],"mappings":";;;;+BAWaA;;;eAAAA;;;wBAXc;wBACG;kEACR;oBAIf;wBACgB;kCACU;;;;;;;;;;;;;;;AAG1B,IAAA,AAAMA,kBAAN,MAAMA;IAeXC,eAAe;QACb,OAAO,IAAI,CAACC,SAAS;IACvB;IAEAC,WAAW;QACT,OAAO,IAAI,CAACC,WAAW;IACzB;IAjBA,YAAY,AAAQC,aAA4B,CAAE;aAA9BA,gBAAAA;QAClB,IAAI,CAACH,SAAS,GAAG,IAAII,kBAAS,CAAC;YAC7BC,MAAM,IAAI,CAACF,aAAa,CAACG,GAAG,CAAC;QAC/B;QAEA,IAAI,CAACJ,WAAW,GAAGK,IAAAA,kCAAiB,EAAC;YACnCC,OAAOC,IAAAA,cAAM,EAAC;YACdC,YAAYC,kCAAgB;QAC9B;IACF;AASF"}