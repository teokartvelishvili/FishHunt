{"version":3,"sources":["../../../src/users/schemas/user.schema.ts"],"sourcesContent":["import { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\r\nimport { Document } from 'mongoose';\r\nimport { Role } from '@/types/role.enum';\r\n\r\n@Schema({\r\n  timestamps: true,\r\n  toJSON: {\r\n    transform: (_, ret) => {\r\n      ret.id = ret._id;\r\n      delete ret.__v;\r\n      delete ret.password;\r\n      ret.createdAt = ret.createdAt;\r\n    },\r\n  },\r\n})\r\nexport class User {\r\n  @Prop({ required: true })\r\n  name: string;\r\n\r\n  @Prop({ required: true, unique: true })\r\n  email: string;\r\n\r\n  @Prop()\r\n  password?: string;\r\n\r\n  @Prop({ type: String, unique: true, sparse: true }) // Google-·Éò·É° ·Éõ·Éù·Éõ·ÉÆ·Éõ·Éê·É†·Éî·Éë·Éö·Éî·Éë·Éò·É°·Éó·Éï·Éò·É°\r\n  googleId?: string;\r\n\r\n  @Prop({ type: String, enum: Role, default: Role.User })\r\n  role: Role;\r\n  @Prop()\r\n  createdAt?: Date;\r\n\r\n  @Prop()\r\n  updatedAt?: Date;\r\n\r\n  @Prop({ type: String, default: null })\r\n  refreshToken?: string | null;\r\n\r\n  // üëá **·Éî·É° ·Éï·Éî·Éö·Éî·Éë·Éò ·Éõ·ÉÆ·Éù·Éö·Éù·Éì Seller-·É° ·Éì·Éê·É°·É≠·Éò·É†·Éì·Éî·Éë·Éê, ·Éê·Éõ·Éò·É¢·Éù·Éõ `required: false` ·Éï·É£·É¢·Éù·Éï·Éî·Éë·Éó**\r\n  @Prop({ type: String, default: null })\r\n  storeName?: string;\r\n\r\n  @Prop({ type: String, default: null })\r\n  storeLogo?: string;\r\n\r\n  @Prop({ type: String, default: null })\r\n  ownerFirstName?: string;\r\n\r\n  @Prop({ type: String, default: null })\r\n  ownerLastName?: string;\r\n\r\n  @Prop({ type: String, default: null })\r\n  phoneNumber?: string;\r\n\r\n  @Prop({ type: String, default: null })\r\n  identificationNumber?: string;\r\n\r\n  @Prop({ type: String, default: null })\r\n  accountNumber?: string;\r\n\r\n  @Prop()\r\n  passwordResetToken?: string;\r\n\r\n  @Prop()\r\n  passwordResetExpires?: Date;\r\n\r\n  @Prop({ type: String, default: null })\r\n  profileImagePath: string;\r\n}\r\n\r\nexport type UserDocument = User & Document;\r\nexport const UserSchema = SchemaFactory.createForClass(User);\r\n\r\nUserSchema.pre('save', function (next) {\r\n  if (this.email) {\r\n    this.email = this.email.toLowerCase();\r\n  }\r\n  next();\r\n});\r\n"],"names":["User","UserSchema","required","unique","type","String","sparse","enum","Role","default","timestamps","toJSON","transform","_","ret","id","_id","__v","password","createdAt","SchemaFactory","createForClass","pre","next","email","toLowerCase"],"mappings":";;;;;;;;;;;QAeaA;eAAAA;;QAyDAC;eAAAA;;;0BAxE+B;0BAEvB;;;;;;;;;;AAad,IAAA,AAAMD,OAAN,MAAMA;AAsDb;;;QArDUE,UAAU;;;;;;QAGVA,UAAU;QAAMC,QAAQ;;;;;;;;;;QAMxBC,MAAMC;QAAQF,QAAQ;QAAMG,QAAQ;;;;;;QAGpCF,MAAMC;QAAQE,MAAMC,cAAI;QAAEC,SAASD,cAAI,CAACR,IAAI;;;;;;;;;;;;;;QAQ5CI,MAAMC;QAAQI,SAAS;;;;;;QAIvBL,MAAMC;QAAQI,SAAS;;;;;;QAGvBL,MAAMC;QAAQI,SAAS;;;;;;QAGvBL,MAAMC;QAAQI,SAAS;;;;;;QAGvBL,MAAMC;QAAQI,SAAS;;;;;;QAGvBL,MAAMC;QAAQI,SAAS;;;;;;QAGvBL,MAAMC;QAAQI,SAAS;;;;;;QAGvBL,MAAMC;QAAQI,SAAS;;;;;;;;;;;;;;QASvBL,MAAMC;QAAQI,SAAS;;;;;;QA9D/BC,YAAY;QACZC,QAAQ;YACNC,WAAW,CAACC,GAAGC;gBACbA,IAAIC,EAAE,GAAGD,IAAIE,GAAG;gBAChB,OAAOF,IAAIG,GAAG;gBACd,OAAOH,IAAII,QAAQ;gBACnBJ,IAAIK,SAAS,GAAGL,IAAIK,SAAS;YAC/B;QACF;;;AA2DK,MAAMlB,aAAamB,uBAAa,CAACC,cAAc,CAACrB;AAEvDC,WAAWqB,GAAG,CAAC,QAAQ,SAAUC,IAAI;IACnC,IAAI,IAAI,CAACC,KAAK,EAAE;QACd,IAAI,CAACA,KAAK,GAAG,IAAI,CAACA,KAAK,CAACC,WAAW;IACrC;IACAF;AACF"}