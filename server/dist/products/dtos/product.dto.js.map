{"version":3,"sources":["../../../src/products/dtos/product.dto.ts"],"sourcesContent":["import {\r\n  IsString,\r\n  IsNumber,\r\n  IsArray,\r\n  IsEnum,\r\n  IsOptional,\r\n  IsObject,\r\n  ValidateNested,\r\n  IsMongoId,\r\n} from 'class-validator';\r\nimport {\r\n  ProductStatus,\r\n  DeliveryType,\r\n  MainCategory,\r\n  AgeGroup,\r\n} from '../schemas/product.schema';\r\nimport { Type } from 'class-transformer';\r\n\r\nclass CategoryStructureDto {\r\n  @IsEnum(MainCategory)\r\n  main: MainCategory;\r\n\r\n  @IsString()\r\n  sub: string;\r\n\r\n  @IsString()\r\n  @IsOptional()\r\n  subEn?: string;\r\n\r\n  @IsEnum(AgeGroup)\r\n  @IsOptional()\r\n  ageGroup?: AgeGroup;\r\n\r\n  @IsString()\r\n  @IsOptional()\r\n  size?: string;\r\n\r\n  @IsString()\r\n  @IsOptional()\r\n  color?: string;\r\n\r\n  @IsString()\r\n  @IsOptional()\r\n  colorEn?: string;\r\n}\r\n\r\nclass ProductVariantDto {\r\n  @IsString()\r\n  size: string;\r\n\r\n  @IsString()\r\n  color: string;\r\n\r\n  @IsString()\r\n  @IsOptional()\r\n  colorEn?: string;\r\n\r\n  @IsNumber()\r\n  stock: number;\r\n\r\n  @IsString()\r\n  @IsOptional()\r\n  sku?: string;\r\n}\r\n\r\nexport class ProductDto {\r\n  @IsString()\r\n  name!: string;\r\n\r\n  @IsString()\r\n  @IsOptional()\r\n  nameEn?: string;\r\n\r\n  @IsNumber()\r\n  price!: number;\r\n\r\n  // Discount functionality\r\n  @IsNumber()\r\n  @IsOptional()\r\n  discountPercentage?: number;\r\n\r\n  @IsOptional()\r\n  discountStartDate?: Date;\r\n\r\n  @IsOptional()\r\n  discountEndDate?: Date;\r\n\r\n  @IsString()\r\n  description!: string;\r\n\r\n  @IsString()\r\n  @IsOptional()\r\n  descriptionEn?: string;\r\n\r\n  @IsString()\r\n  @IsOptional()\r\n  videoDescription?: string; // YouTube embed code or URL\r\n\r\n  @IsArray()\r\n  @IsOptional()\r\n  @IsString({ each: true })\r\n  hashtags?: string[];\r\n\r\n  @IsArray()\r\n  @IsString({ each: true })\r\n  images!: string[];\r\n\r\n  @IsString()\r\n  brand?: string;\r\n\r\n  // Legacy category field - kept for backward compatibility\r\n  @IsString()\r\n  @IsOptional()\r\n  category?: string;\r\n\r\n  // New category fields\r\n  @IsMongoId()\r\n  @IsOptional()\r\n  mainCategory?: string;\r\n\r\n  @IsString()\r\n  @IsOptional()\r\n  mainCategoryEn?: string;\r\n\r\n  @IsMongoId()\r\n  @IsOptional()\r\n  subCategory?: string;\r\n\r\n  @IsString()\r\n  @IsOptional()\r\n  subCategoryEn?: string;\r\n\r\n  // Product attributes\r\n  @IsArray()\r\n  @IsOptional()\r\n  ageGroups?: string[];\r\n\r\n  @IsArray()\r\n  @IsOptional()\r\n  sizes?: string[];\r\n\r\n  @IsArray()\r\n  @IsOptional()\r\n  colors?: string[];\r\n\r\n  @IsArray()\r\n  @IsOptional()\r\n  colorsEn?: string[];\r\n\r\n  @IsOptional()\r\n  @IsObject()\r\n  @ValidateNested()\r\n  @Type(() => CategoryStructureDto)\r\n  categoryStructure?: CategoryStructureDto;\r\n\r\n  @IsNumber()\r\n  countInStock!: number; // Legacy field\r\n\r\n  @IsArray()\r\n  @IsOptional()\r\n  @ValidateNested({ each: true })\r\n  @Type(() => ProductVariantDto)\r\n  variants?: ProductVariantDto[];\r\n\r\n  @IsString()\r\n  @IsOptional()\r\n  brandLogo?: string;\r\n\r\n  @IsEnum(ProductStatus)\r\n  status?: ProductStatus;\r\n\r\n  @IsString()\r\n  @IsOptional()\r\n  rejectionReason?: string;\r\n\r\n  @IsEnum(DeliveryType)\r\n  @IsOptional()\r\n  deliveryType?: DeliveryType;\r\n\r\n  @IsNumber()\r\n  @IsOptional()\r\n  minDeliveryDays?: number;\r\n\r\n  @IsNumber()\r\n  @IsOptional()\r\n  maxDeliveryDays?: number;\r\n\r\n  @IsObject()\r\n  @IsOptional()\r\n  dimensions?: {\r\n    width?: number;\r\n    height?: number;\r\n    depth?: number;\r\n  };\r\n\r\n  @IsString()\r\n  @IsOptional()\r\n  brandLogoUrl?: string;\r\n\r\n  // Add the missing property for existing images\r\n  @IsString()\r\n  @IsOptional()\r\n  existingImages?: string;\r\n}\r\n\r\nexport class FindAllProductsDto {\r\n  @IsOptional()\r\n  @IsString()\r\n  keyword?: string;\r\n\r\n  @IsOptional()\r\n  @IsString()\r\n  page?: string;\r\n\r\n  @IsOptional()\r\n  @IsString()\r\n  limit?: string;\r\n\r\n  // Legacy field, keeping for backward compatibility\r\n  @IsOptional()\r\n  @IsString()\r\n  category?: string;\r\n\r\n  // New category system fields\r\n  @IsOptional()\r\n  @IsMongoId()\r\n  mainCategory?: string;\r\n\r\n  @IsOptional()\r\n  @IsMongoId()\r\n  subCategory?: string;\r\n\r\n  @IsOptional()\r\n  @IsString()\r\n  brand?: string;\r\n\r\n  @IsOptional()\r\n  @IsString()\r\n  userId?: string;\r\n\r\n  @IsOptional()\r\n  @IsString()\r\n  sortBy?: string;\r\n\r\n  @IsOptional()\r\n  @IsString()\r\n  sortOrder?: string;\r\n\r\n  // Attribute filters\r\n  @IsOptional()\r\n  @IsString()\r\n  ageGroup?: string;\r\n\r\n  @IsOptional()\r\n  @IsString()\r\n  size?: string;\r\n\r\n  @IsOptional()\r\n  @IsString()\r\n  color?: string;\r\n\r\n  @IsOptional()\r\n  @IsString()\r\n  includeVariants?: string;\r\n}\r\n\r\n// We already have the correct DTO definitions with IsMongoId() decorators for mainCategory and subCategory\r\n// Just ensure they're properly transformed to ObjectIds in the service\r\n"],"names":["FindAllProductsDto","ProductDto","CategoryStructureDto","ProductVariantDto","each"],"mappings":";;;;;;;;;;;QA6MaA;eAAAA;;QA5IAC;eAAAA;;;gCAxDN;+BAMA;kCACc;;;;;;;;;;AAErB,IAAA,AAAMC,uBAAN,MAAMA;AA0BN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAA,AAAMC,oBAAN,MAAMA;AAiBN;;;;;;;;;;;;;;;;;;;;;;;AAEO,IAAA,AAAMF,aAAN,MAAMA;AA0Ib;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAvGcG,MAAM;;;;;;;QAINA,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oCAgDNF;;;;;;;;;;;QAQME,MAAM;;oCACZD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CP,IAAA,AAAMH,qBAAN,MAAMA;AA2Db,EAEA,2GAA2G;CAC3G,uEAAuE"}