{"version":3,"sources":["../../src/interceptors/serialize.interceptor.ts"],"sourcesContent":["import {\r\n  NestInterceptor,\r\n  ExecutionContext,\r\n  CallHandler,\r\n  UseInterceptors,\r\n} from '@nestjs/common';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { ClassConstructor, plainToClass } from 'class-transformer';\r\n\r\nexport const Serialize = (dto: ClassConstructor<any>) => {\r\n  return UseInterceptors(new SerializeInterceptor(dto));\r\n};\r\n\r\nexport class SerializeInterceptor implements NestInterceptor {\r\n  constructor(private dto: ClassConstructor<any>) {}\r\n\r\n  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {\r\n    return next.handle().pipe(\r\n      map((data: any) => {\r\n        return plainToClass(this.dto, data, {\r\n          excludeExtraneousValues: true,\r\n        });\r\n      })\r\n    );\r\n  }\r\n}\r\n"],"names":["Serialize","SerializeInterceptor","dto","UseInterceptors","intercept","context","next","handle","pipe","map","data","plainToClass","excludeExtraneousValues"],"mappings":";;;;;;;;;;;QAUaA;eAAAA;;QAIAC;eAAAA;;;wBATN;2BAEa;kCAC2B;AAExC,MAAMD,YAAY,CAACE;IACxB,OAAOC,IAAAA,uBAAe,EAAC,IAAIF,qBAAqBC;AAClD;AAEO,IAAA,AAAMD,uBAAN,MAAMA;IAGXG,UAAUC,OAAyB,EAAEC,IAAiB,EAAmB;QACvE,OAAOA,KAAKC,MAAM,GAAGC,IAAI,CACvBC,IAAAA,cAAG,EAAC,CAACC;YACH,OAAOC,IAAAA,8BAAY,EAAC,IAAI,CAACT,GAAG,EAAEQ,MAAM;gBAClCE,yBAAyB;YAC3B;QACF;IAEJ;IAVA,YAAY,AAAQV,GAA0B,CAAE;aAA5BA,MAAAA;IAA6B;AAWnD"}