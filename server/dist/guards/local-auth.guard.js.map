{"version":3,"sources":["../../src/guards/local-auth.guard.ts"],"sourcesContent":["import {\r\n  BadRequestException,\r\n  ExecutionContext,\r\n  Injectable,\r\n} from '@nestjs/common';\r\nimport { AuthGuard } from '@nestjs/passport';\r\nimport { isString } from 'class-validator';\r\n\r\n@Injectable()\r\nexport class LocalAuthGuard extends AuthGuard('local') {\r\n  async canActivate(context: ExecutionContext): Promise<boolean> {\r\n    const request = context.switchToHttp().getRequest();\r\n\r\n    const { email, password } = request.body;\r\n\r\n    if (\r\n      email.length === 0 ||\r\n      password.length === 0 ||\r\n      !isString(password) ||\r\n      !isString(email)\r\n    ) {\r\n      throw new BadRequestException('Please enter a valid email and password.');\r\n    }\r\n\r\n    const parentCanActivate = (await super.canActivate(context)) as boolean;\r\n\r\n    return parentCanActivate;\r\n  }\r\n}\r\n"],"names":["LocalAuthGuard","AuthGuard","canActivate","context","request","switchToHttp","getRequest","email","password","body","length","isString","BadRequestException","parentCanActivate"],"mappings":";;;;+BASaA;;;eAAAA;;;wBALN;0BACmB;gCACD;;;;;;;AAGlB,IAAA,AAAMA,iBAAN,MAAMA,uBAAuBC,IAAAA,mBAAS,EAAC;IAC5C,MAAMC,YAAYC,OAAyB,EAAoB;QAC7D,MAAMC,UAAUD,QAAQE,YAAY,GAAGC,UAAU;QAEjD,MAAM,EAAEC,KAAK,EAAEC,QAAQ,EAAE,GAAGJ,QAAQK,IAAI;QAExC,IACEF,MAAMG,MAAM,KAAK,KACjBF,SAASE,MAAM,KAAK,KACpB,CAACC,IAAAA,wBAAQ,EAACH,aACV,CAACG,IAAAA,wBAAQ,EAACJ,QACV;YACA,MAAM,IAAIK,2BAAmB,CAAC;QAChC;QAEA,MAAMC,oBAAqB,MAAM,KAAK,CAACX,YAAYC;QAEnD,OAAOU;IACT;AACF"}