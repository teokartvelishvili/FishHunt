{"version":3,"sources":["../../../src/categories/controllers/categories.controller.ts"],"sourcesContent":["import {\r\n  Controller,\r\n  Get,\r\n  Post,\r\n  Body,\r\n  Param,\r\n  Put,\r\n  Delete,\r\n  Query,\r\n  UseGuards,\r\n  BadRequestException,\r\n} from '@nestjs/common';\r\nimport { CategoryService } from '../services/category.service';\r\n\r\nimport { CreateCategoryDto, UpdateCategoryDto } from '../dto/category.dto';\r\nimport { JwtAuthGuard } from '@/guards/jwt-auth.guard';\r\nimport { RolesGuard } from '@/guards/roles.guard';\r\nimport { Role } from '@/types/role.enum';\r\nimport { Roles } from '@/decorators/roles.decorator';\r\nimport {\r\n  ApiTags,\r\n  ApiOperation,\r\n  ApiResponse,\r\n  ApiParam,\r\n  ApiQuery,\r\n  ApiBearerAuth,\r\n} from '@nestjs/swagger';\r\nimport { CategoryResponseDto } from '../dto/category.dto';\r\n\r\n@ApiTags('categories')\r\n@Controller('categories')\r\nexport class CategoriesController {\r\n  constructor(private readonly categoryService: CategoryService) {}\r\n\r\n  // Main category endpoints only\r\n  @Get()\r\n  @ApiOperation({ summary: 'Get all categories' })\r\n  @ApiQuery({\r\n    name: 'includeInactive',\r\n    required: false,\r\n    type: Boolean,\r\n    description: 'Include inactive categories',\r\n  })\r\n  @ApiResponse({\r\n    status: 200,\r\n    description: 'Returns all categories',\r\n    schema: {\r\n      type: 'array',\r\n      items: {\r\n        type: 'object',\r\n        properties: {\r\n          id: { type: 'string', example: '60d21b4667d0d8992e610c85' },\r\n          name: { type: 'string', example: 'ტანსაცმელი' },\r\n          description: {\r\n            type: 'string',\r\n            example: 'სხვადასხვა ტიპის ტანსაცმელი',\r\n          },\r\n          isActive: { type: 'boolean', example: true },\r\n          createdAt: {\r\n            type: 'string',\r\n            format: 'date-time',\r\n            example: '2023-06-20T12:00:00Z',\r\n          },\r\n          updatedAt: {\r\n            type: 'string',\r\n            format: 'date-time',\r\n            example: '2023-06-20T12:00:00Z',\r\n          },\r\n        },\r\n      },\r\n    },\r\n  })\r\n  findAllCategories(@Query('includeInactive') includeInactive?: string) {\r\n    return this.categoryService.findAll(includeInactive === 'true');\r\n  }\r\n\r\n  @Get(':id')\r\n  @ApiOperation({ summary: 'Get category by ID' })\r\n  @ApiParam({ name: 'id', description: 'Category ID' })\r\n  @ApiResponse({\r\n    status: 200,\r\n    description: 'Returns the category',\r\n    schema: {\r\n      type: 'object',\r\n      properties: {\r\n        id: { type: 'string', example: '60d21b4667d0d8992e610c85' },\r\n        name: { type: 'string', example: 'ტანსაცმელი' },\r\n        description: { type: 'string', example: 'სხვადასხვა ტიპის ტანსაცმელი' },\r\n        isActive: { type: 'boolean', example: true },\r\n        createdAt: {\r\n          type: 'string',\r\n          format: 'date-time',\r\n          example: '2023-06-20T12:00:00Z',\r\n        },\r\n        updatedAt: {\r\n          type: 'string',\r\n          format: 'date-time',\r\n          example: '2023-06-20T12:00:00Z',\r\n        },\r\n      },\r\n    },\r\n  })\r\n  @ApiResponse({ status: 404, description: 'Category not found' })\r\n  findCategoryById(@Param('id') id: string) {\r\n    return this.categoryService.findById(id);\r\n  }\r\n\r\n  @Post()\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.Admin)\r\n  @ApiBearerAuth()\r\n  @ApiOperation({ summary: 'Create a new category' })\r\n  @ApiResponse({\r\n    status: 201,\r\n    description: 'The category has been created',\r\n    type: CategoryResponseDto,\r\n  })\r\n  createCategory(@Body() createCategoryDto: CreateCategoryDto) {\r\n    return this.categoryService.create(createCategoryDto);\r\n  }\r\n\r\n  @Put(':id')\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.Admin)\r\n  @ApiBearerAuth()\r\n  @ApiOperation({ summary: 'Update a category' })\r\n  @ApiParam({ name: 'id', description: 'Category ID' })\r\n  @ApiResponse({ status: 200, description: 'The category has been updated' })\r\n  @ApiResponse({ status: 404, description: 'Category not found' })\r\n  updateCategory(\r\n    @Param('id') id: string,\r\n    @Body() updateCategoryDto: UpdateCategoryDto,\r\n  ) {\r\n    return this.categoryService.update(id, updateCategoryDto);\r\n  }\r\n\r\n  @Delete(':id')\r\n  @UseGuards(JwtAuthGuard, RolesGuard)\r\n  @Roles(Role.Admin)\r\n  @ApiBearerAuth()\r\n  @ApiOperation({ summary: 'Delete a category' })\r\n  @ApiParam({ name: 'id', description: 'Category ID' })\r\n  @ApiResponse({ status: 200, description: 'The category has been deleted' })\r\n  @ApiResponse({ status: 404, description: 'Category not found' })\r\n  removeCategory(@Param('id') id: string) {\r\n    return this.categoryService.remove(id);\r\n  }\r\n}\r\n"],"names":["CategoriesController","findAllCategories","includeInactive","categoryService","findAll","findCategoryById","id","findById","createCategory","createCategoryDto","create","updateCategory","updateCategoryDto","update","removeCategory","remove","summary","name","required","type","Boolean","description","status","schema","items","properties","example","isActive","createdAt","format","updatedAt","Admin","CategoryResponseDto"],"mappings":";;;;+BA+BaA;;;eAAAA;;;wBApBN;iCACyB;6BAEqB;8BACxB;4BACF;0BACN;gCACC;yBAQf;;;;;;;;;;;;;;;AAKA,IAAA,AAAMA,uBAAN,MAAMA;IAGX,+BAA+B;IAsC/BC,kBAAkB,AAA0BC,eAAwB,EAAE;QACpE,OAAO,IAAI,CAACC,eAAe,CAACC,OAAO,CAACF,oBAAoB;IAC1D;IA6BAG,iBAAiB,AAAaC,EAAU,EAAE;QACxC,OAAO,IAAI,CAACH,eAAe,CAACI,QAAQ,CAACD;IACvC;IAYAE,eAAe,AAAQC,iBAAoC,EAAE;QAC3D,OAAO,IAAI,CAACN,eAAe,CAACO,MAAM,CAACD;IACrC;IAUAE,eACE,AAAaL,EAAU,EACvB,AAAQM,iBAAoC,EAC5C;QACA,OAAO,IAAI,CAACT,eAAe,CAACU,MAAM,CAACP,IAAIM;IACzC;IAUAE,eAAe,AAAaR,EAAU,EAAE;QACtC,OAAO,IAAI,CAACH,eAAe,CAACY,MAAM,CAACT;IACrC;IAlHA,YAAY,AAAiBH,eAAgC,CAAE;aAAlCA,kBAAAA;IAAmC;AAmHlE;;;;QA/GkBa,SAAS;;;QAEvBC,MAAM;QACNC,UAAU;QACVC,MAAMC;QACNC,aAAa;;;QAGbC,QAAQ;QACRD,aAAa;QACbE,QAAQ;YACNJ,MAAM;YACNK,OAAO;gBACLL,MAAM;gBACNM,YAAY;oBACVnB,IAAI;wBAAEa,MAAM;wBAAUO,SAAS;oBAA2B;oBAC1DT,MAAM;wBAAEE,MAAM;wBAAUO,SAAS;oBAAa;oBAC9CL,aAAa;wBACXF,MAAM;wBACNO,SAAS;oBACX;oBACAC,UAAU;wBAAER,MAAM;wBAAWO,SAAS;oBAAK;oBAC3CE,WAAW;wBACTT,MAAM;wBACNU,QAAQ;wBACRH,SAAS;oBACX;oBACAI,WAAW;wBACTX,MAAM;wBACNU,QAAQ;wBACRH,SAAS;oBACX;gBACF;YACF;QACF;;;;;;;;;;;;QAOcV,SAAS;;;QACbC,MAAM;QAAMI,aAAa;;;QAEnCC,QAAQ;QACRD,aAAa;QACbE,QAAQ;YACNJ,MAAM;YACNM,YAAY;gBACVnB,IAAI;oBAAEa,MAAM;oBAAUO,SAAS;gBAA2B;gBAC1DT,MAAM;oBAAEE,MAAM;oBAAUO,SAAS;gBAAa;gBAC9CL,aAAa;oBAAEF,MAAM;oBAAUO,SAAS;gBAA8B;gBACtEC,UAAU;oBAAER,MAAM;oBAAWO,SAAS;gBAAK;gBAC3CE,WAAW;oBACTT,MAAM;oBACNU,QAAQ;oBACRH,SAAS;gBACX;gBACAI,WAAW;oBACTX,MAAM;oBACNU,QAAQ;oBACRH,SAAS;gBACX;YACF;QACF;;;QAEaJ,QAAQ;QAAKD,aAAa;;;;;;;;;;;;8CAO7BU;;;QAEIf,SAAS;;;QAEvBM,QAAQ;QACRD,aAAa;QACbF,MAAMa,gCAAmB;;;;;;;;;;;;8CAQfD;;;QAEIf,SAAS;;;QACbC,MAAM;QAAMI,aAAa;;;QACtBC,QAAQ;QAAKD,aAAa;;;QAC1BC,QAAQ;QAAKD,aAAa;;;;;;;;;;;;;;8CAU7BU;;;QAEIf,SAAS;;;QACbC,MAAM;QAAMI,aAAa;;;QACtBC,QAAQ;QAAKD,aAAa;;;QAC1BC,QAAQ;QAAKD,aAAa"}