{"version":3,"sources":["../../../src/categories/schemas/subcategory.schema.ts"],"sourcesContent":["import * as mongoose from 'mongoose';\r\nimport { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\r\nimport { Document, HydratedDocument } from 'mongoose';\r\nimport { Category } from './category.schema';\r\nimport { ApiProperty } from '@nestjs/swagger';\r\n\r\nexport type SubCategoryDocument = HydratedDocument<SubCategory>;\r\n\r\n@Schema({ timestamps: true })\r\nexport class SubCategory {\r\n  @ApiProperty({\r\n    description: 'Subcategory ID (auto-generated)',\r\n    example: '60d21b4667d0d8992e610c86',\r\n  })\r\n  id: string;\r\n\r\n  @ApiProperty({ description: 'Subcategory name', example: 'მაისურები' })\r\n  @Prop({\r\n    required: true,\r\n  })\r\n  name: string;\r\n\r\n  @ApiProperty({\r\n    description: 'Subcategory name in English',\r\n    example: 'T-shirts',\r\n  })\r\n  @Prop({ required: false })\r\n  nameEn?: string;\r\n\r\n  @ApiProperty({\r\n    description: 'Parent category',\r\n    example: '60d21b4667d0d8992e610c85',\r\n  })\r\n  @Prop({\r\n    type: mongoose.Schema.Types.ObjectId,\r\n    ref: 'Category',\r\n    required: true,\r\n  })\r\n  categoryId: Category;\r\n\r\n  @ApiProperty({\r\n    description: 'Available age groups',\r\n    example: ['ბავშვები', 'მოზრდილები'],\r\n  })\r\n  @Prop({ type: [String], default: [] })\r\n  ageGroups: string[];\r\n\r\n  @ApiProperty({\r\n    description: 'Available sizes',\r\n    example: ['S', 'M', 'L', 'XL'],\r\n  })\r\n  @Prop({ type: [String], default: [] })\r\n  sizes: string[];\r\n\r\n  @ApiProperty({\r\n    description: 'Available colors',\r\n    example: ['შავი', 'თეთრი', 'წითელი'],\r\n  })\r\n  @Prop({ type: [String], default: [] })\r\n  colors: string[];\r\n\r\n  @ApiProperty({\r\n    description: 'Subcategory description',\r\n    example: 'მაისურები ყველა სეზონისთვის',\r\n  })\r\n  @Prop({ required: false })\r\n  description?: string;\r\n\r\n  @ApiProperty({\r\n    description: 'Subcategory description in English',\r\n    example: 'T-shirts for all seasons',\r\n  })\r\n  @Prop({ required: false })\r\n  descriptionEn?: string;\r\n\r\n  @ApiProperty({ description: 'Is subcategory active', default: true })\r\n  @Prop({ default: true })\r\n  isActive: boolean;\r\n}\r\n\r\nexport const SubCategorySchema = SchemaFactory.createForClass(SubCategory);\r\n\r\n// Create compound index for unique subcategories within a category\r\nSubCategorySchema.index({ name: 1, categoryId: 1 }, { unique: true });\r\n\r\n// Ensure the virtual id field is properly included in serialization\r\nSubCategorySchema.set('toJSON', {\r\n  virtuals: true,\r\n  transform: (doc, ret) => {\r\n    ret.id = ret._id;\r\n    delete ret._id;\r\n    delete ret.__v;\r\n    return ret;\r\n  },\r\n});\r\n"],"names":["SubCategory","SubCategorySchema","description","example","required","type","mongoose","Schema","Types","ObjectId","ref","String","default","timestamps","SchemaFactory","createForClass","index","name","categoryId","unique","set","virtuals","transform","doc","ret","id","_id","__v"],"mappings":";;;;;;;;;;;QASaA;eAAAA;;QAuEAC;eAAAA;;;kEAhFa;2BACkB;gCAEnB;yBACG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKrB,IAAA,AAAMD,cAAN,MAAMA;AAqEb;;;QAnEIE,aAAa;QACbC,SAAS;;;;;;QAIID,aAAa;QAAoBC,SAAS;;;QAEvDC,UAAU;;;;;;QAKVF,aAAa;QACbC,SAAS;;;QAEHC,UAAU;;;;;;QAIhBF,aAAa;QACbC,SAAS;;;QAGTE,MAAMC,UAASC,MAAM,CAACC,KAAK,CAACC,QAAQ;QACpCC,KAAK;QACLN,UAAU;;;;;;QAKVF,aAAa;QACbC,SAAS;YAAC;YAAY;SAAa;;;QAE7BE,MAAM;YAACM;SAAO;QAAEC,SAAS,EAAE;;;;;;QAIjCV,aAAa;QACbC,SAAS;YAAC;YAAK;YAAK;YAAK;SAAK;;;QAExBE,MAAM;YAACM;SAAO;QAAEC,SAAS,EAAE;;;;;;QAIjCV,aAAa;QACbC,SAAS;YAAC;YAAQ;YAAS;SAAS;;;QAE9BE,MAAM;YAACM;SAAO;QAAEC,SAAS,EAAE;;;;;;QAIjCV,aAAa;QACbC,SAAS;;;QAEHC,UAAU;;;;;;QAIhBF,aAAa;QACbC,SAAS;;;QAEHC,UAAU;;;;;;QAGHF,aAAa;QAAyBU,SAAS;;;QACtDA,SAAS;;;;;;QApETC,YAAY;;;AAwEf,MAAMZ,oBAAoBa,wBAAa,CAACC,cAAc,CAACf;AAE9D,mEAAmE;AACnEC,kBAAkBe,KAAK,CAAC;IAAEC,MAAM;IAAGC,YAAY;AAAE,GAAG;IAAEC,QAAQ;AAAK;AAEnE,oEAAoE;AACpElB,kBAAkBmB,GAAG,CAAC,UAAU;IAC9BC,UAAU;IACVC,WAAW,CAACC,KAAKC;QACfA,IAAIC,EAAE,GAAGD,IAAIE,GAAG;QAChB,OAAOF,IAAIE,GAAG;QACd,OAAOF,IAAIG,GAAG;QACd,OAAOH;IACT;AACF"}