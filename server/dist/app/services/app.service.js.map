{"version":3,"sources":["../../../src/app/services/app.service.ts"],"sourcesContent":["import { BadRequestException, Injectable } from '@nestjs/common';\r\nimport { CloudinaryService } from 'src/cloudinary/services/cloudinary.service';\r\n\r\n@Injectable()\r\nexport class AppService {\r\n  constructor(private cloudinary: CloudinaryService) {}\r\n\r\n  async uploadImageToCloudinary(file: Express.Multer.File) {\r\n    const result = await this.cloudinary.uploadImage(file).catch((err) => {\r\n      console.log(err);\r\n      throw new BadRequestException('Invalid file type.');\r\n    });\r\n\r\n    const optimizedUrl = result.secure_url.replace(\r\n      '/upload/',\r\n      '/upload/q_auto,f_auto,w_1024/',\r\n    );\r\n    return optimizedUrl;\r\n  }\r\n\r\n  async uploadBannerImageToCloudinary(file: Express.Multer.File) {\r\n    const result = await this.cloudinary.uploadImage(file).catch((err) => {\r\n      console.log(err);\r\n      throw new BadRequestException('Invalid file type.');\r\n    });\r\n\r\n    // For banners, use higher quality and larger size\r\n    const optimizedUrl = result.secure_url.replace(\r\n      '/upload/',\r\n      '/upload/q_80,f_auto,w_1920/',\r\n    );\r\n    return optimizedUrl;\r\n  }\r\n}\r\n"],"names":["AppService","uploadImageToCloudinary","file","result","cloudinary","uploadImage","catch","err","console","log","BadRequestException","optimizedUrl","secure_url","replace","uploadBannerImageToCloudinary"],"mappings":";;;;+BAIaA;;;eAAAA;;;wBAJmC;mCACd;;;;;;;;;;AAG3B,IAAA,AAAMA,aAAN,MAAMA;IAGX,MAAMC,wBAAwBC,IAAyB,EAAE;QACvD,MAAMC,SAAS,MAAM,IAAI,CAACC,UAAU,CAACC,WAAW,CAACH,MAAMI,KAAK,CAAC,CAACC;YAC5DC,QAAQC,GAAG,CAACF;YACZ,MAAM,IAAIG,2BAAmB,CAAC;QAChC;QAEA,MAAMC,eAAeR,OAAOS,UAAU,CAACC,OAAO,CAC5C,YACA;QAEF,OAAOF;IACT;IAEA,MAAMG,8BAA8BZ,IAAyB,EAAE;QAC7D,MAAMC,SAAS,MAAM,IAAI,CAACC,UAAU,CAACC,WAAW,CAACH,MAAMI,KAAK,CAAC,CAACC;YAC5DC,QAAQC,GAAG,CAACF;YACZ,MAAM,IAAIG,2BAAmB,CAAC;QAChC;QAEA,kDAAkD;QAClD,MAAMC,eAAeR,OAAOS,UAAU,CAACC,OAAO,CAC5C,YACA;QAEF,OAAOF;IACT;IA3BA,YAAY,AAAQP,UAA6B,CAAE;aAA/BA,aAAAA;IAAgC;AA4BtD"}